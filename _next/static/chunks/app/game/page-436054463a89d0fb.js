(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{7121:function(t,e,l){Promise.resolve().then(l.bind(l,3048))},6783:function(t,e,l){"use strict";var i=l(7437),a=l(2265),s=l(703),n=l(8792),o=l(8796);let r=t=>{let{onClose:e}=t,[l,s]=(0,a.useState)(!0);return(0,i.jsx)("div",{className:"modal ".concat(l?"is-active":""),style:{position:"fixed",zIndex:9999},children:(0,i.jsx)("div",{className:"modal-background fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,i.jsx)("div",{className:"modal-content bg-white rounded-lg shadow-xl w-3/4 md:w-1/2 lg:w-1/3",children:(0,i.jsxs)("div",{className:"box p-6 relative",children:[(0,i.jsx)("button",{className:"absolute top-2 right-2 text-3xl",onClick:()=>{s(!1),e()},children:(0,i.jsx)(o.FMH,{fill:"black"})}),(0,i.jsx)("p",{className:"text-lg text-gray-950 font-semibold mb-2",children:"How to Play:"}),(0,i.jsxs)("ul",{className:"list-disc list-inside text-gray-600",children:[(0,i.jsx)("li",{className:"pb-2",children:"Try to guess the location from the sattelite photo on the Earth!"}),(0,i.jsx)("li",{className:"pb-2",children:"Double click (single tap on mobile) on the Earth to place a guess marker, then press Guess button to take a guess."}),(0,i.jsx)("li",{className:"pb-2",children:"Enable GPU acceleration in your browser settings for better performance."})]})]})})})})};e.Z=()=>{let[t,e]=(0,a.useState)(!1);return(0,i.jsxs)("header",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 text-white",children:[(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)(n.default,{href:"/",children:(0,i.jsx)(s.default,{src:"/logo_.png",alt:"Logo",width:40,height:40,className:"cursor-pointer"})})}),(0,i.jsx)("nav",{className:"flex space-x-4",children:(0,i.jsx)("a",{className:"hover:text-gray-300 cursor-pointer",onClick:()=>e(!0),children:"How to Play"})}),(0,i.jsx)("div",{className:"flex items-center space-x-4",children:(0,i.jsx)(s.default,{src:"/profile.jpg",alt:"Profile",width:40,height:40,className:"rounded-full cursor-pointer"})}),t?(0,i.jsx)(r,{onClose:()=>e(!1)}):null]})}},3048:function(t,e,l){"use strict";l.r(e),l.d(e,{default:function(){return M}});var i=l(7437),a=l(9102),s=l.n(a),n=l(6783),o=l(2265),r=l(3618),c=l(4229),d=l(9631),u=l(6376),g=JSON.parse('{"c":{"10":{"location":"Giza","img_path":"/sattelite_imgs/giza.jpg","latitude_tl":30.06627,"longitude_tl":30.89939,"latitude_br":29.88143,"longitude_br":31.3349},"11":{"location":"Beijing","img_path":"/sattelite_imgs/beijing.jpg","latitude_tl":40.2481,"longitude_tl":115.5254,"latitude_br":39.5978,"longitude_br":117.2578},"12":{"location":"Amsterdam","img_path":"/sattelite_imgs/amsterdam.jpg","latitude_tl":52.6114,"longitude_tl":3.9413,"latitude_br":52.0909,"longitude_br":5.6751},"13":{"location":"Toronto","img_path":"/sattelite_imgs/toronto.jpg","latitude_tl":43.9839,"longitude_tl":-80.4295,"latitude_br":43.3666,"longitude_br":-78.6985},"14":{"location":"Melbourne","img_path":"/sattelite_imgs/melbourne.jpg","latitude_tl":-37.495,"longitude_tl":143.9717,"latitude_br":-38.1702,"longitude_br":145.7041},"15":{"location":"Mogadishu","img_path":"/sattelite_imgs/mogadishu.jpg","latitude_tl":2.16448,"longitude_tl":45.0654,"latitude_br":1.9509,"longitude_br":45.49541},"16":{"location":"Honolulu","img_path":"/sattelite_imgs/honolulu.jpg","latitude_tl":21.42111,"longitude_tl":-158.06854,"latitude_br":21.22314,"longitude_br":-157.63887},"17":{"location":"Delhi","img_path":"/sattelite_imgs/delhi.jpg","latitude_tl":28.78075,"longitude_tl":77.00317,"latitude_br":28.59357,"longitude_br":77.43816},"18":{"location":"Cadiz","img_path":"/sattelite_imgs/cadiz.jpg","latitude_tl":36.60698,"longitude_tl":-6.4967,"latitude_br":36.43551,"longitude_br":-6.06462},"01":{"location":"Prague","img_path":"/sattelite_imgs/prague.jpg","latitude_tl":50.2145,"longitude_tl":15.5145,"latitude_br":49.6498,"longitude_br":15.5145},"02":{"location":"Jihlava","img_path":"/sattelite_imgs/jihlava.jpg","latitude_tl":49.7589,"longitude_tl":16.4328,"latitude_br":49.1888,"longitude_br":16.4328},"03":{"location":"Trojmezi","img_path":"/sattelite_imgs/trojmezi.jpg","latitude_tl":49.8001,"longitude_tl":19.6406,"latitude_br":49.2306,"longitude_br":19.6406},"04":{"location":"New York","img_path":"/sattelite_imgs/new_york.jpg","latitude_tl":41.0285,"longitude_tl":-73.1094,"latitude_br":40.3633,"longitude_br":-73.1094},"05":{"location":"Betsiboka","img_path":"/sattelite_imgs/betsiboka.jpg","latitude_tl":-15.4867,"longitude_tl":47.1769,"latitude_br":-16.3304,"longitude_br":47.1769},"06":{"location":"Mount Everest","img_path":"/sattelite_imgs/everest.jpg","latitude_tl":28.2939,"longitude_tl":87.7538,"latitude_br":27.5187,"longitude_br":87.7538},"07":{"location":"Moscow","img_path":"/sattelite_imgs/moscow.jpg","latitude_tl":55.978,"longitude_tl":36.7294,"latitude_br":55.5006,"longitude_br":38.4508},"08":{"location":"Tokyo","img_path":"/sattelite_imgs/tokyo.jpg","latitude_tl":35.7947,"longitude_tl":139.3015,"latitude_br":35.4492,"longitude_br":140.1522},"09":{"location":"Venice","img_path":"/sattelite_imgs/venice.jpg","latitude_tl":45.6092,"longitude_tl":11.8491,"latitude_br":45.3104,"longitude_br":12.7225}}}');let h=(t,e)=>b(m(t),m(e)),m=t=>({latitude:90-u.MathUtils.RAD2DEG*t.phi,longitude:u.MathUtils.RAD2DEG*t.theta}),x=t=>Math.PI/180*t,b=(t,e)=>{let l,i,a,s,n,o;let r=1/298.257223563,c=x(e.longitude-t.longitude),d=Math.atan((1-r)*Math.tan(x(t.latitude))),u=Math.atan((1-r)*Math.tan(x(e.latitude))),g=Math.sin(d),h=Math.cos(d),m=Math.sin(u),b=Math.cos(u),p=c,_=100;do{let t=Math.sin(p),e=Math.cos(p);a=Math.atan2(o=Math.sqrt((b*t)**2+(h*m-g*b*e)**2),n=g*m+h*b*e);let d=h*b*t/o;s=n-2*g*m/(i=1-d**2);let u=r/16*i*(4+r*(4-3*i));l=p,p=c+(1-u)*r*d*(a+u*o*(s+u*n*(-1+2*s**2)))}while(Math.abs(p-l)>1e-12&&--_>0);if(0===_)return NaN;let j=i*(40680631590769-40408299984087.055)/40408299984087.055,f=j/1024*(256+j*(-128+j*(74-47*j)));return 6356752.3142*(1+j/16384*(4096+j*(-768+j*(320-175*j))))*(a-f*o*(s+f/4*(n*(-1+2*s**2)-f/6*s*(-3+4*o**2)*(-3+4*s**2))))/1e3};var p=l(703),_=l(8796),j=l(3019);(0,c.e)({OrbitControls:r.z});let f=()=>{let{camera:t}=(0,c.A)(),e=(0,o.useRef)();return(0,o.useEffect)(()=>{e.current.enableDamping=!0,e.current.dampingFactor=.25,e.current.enableZoom=!0,e.current.rotateSpeed=.5,e.current.enableRotate=!0,e.current.enablePan=!1,e.current.minDistance=1.1,e.current.maxDistance=2},[]),(0,c.C)(()=>{e.current.update()}),(0,i.jsx)(r.z,{ref:e,args:[t]})},y=t=>{let{location:e,onGuessButtonClick:l,clickedSphericalCoords:a}=t,[s,n]=(0,o.useState)(!1),r=g.c[e];return r?(0,i.jsxs)("div",{className:"fixed top-12 right-0 m-4 border-2 border-blue-500 rounded-lg shadow-lg bg-gray-700 z-10",children:[(0,i.jsx)("div",{className:"image-container",children:(0,i.jsx)(p.default,{src:r.img_path,alt:r.location,width:300,height:300,className:"w-auto h-auto cursor-pointer",priority:!0,onClick:()=>n(!0)})}),(0,i.jsx)("button",{onClick:l,className:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600 disabled:bg-gray-500 disabled:opacity-50",disabled:!a,children:"Guess"}),s?(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-20",onClick:()=>n(!1),children:(0,i.jsx)(p.default,{src:r.img_path,alt:r.location,width:1e3,height:1e3,className:"w-auto h-auto",priority:!0,onClick:t=>t.stopPropagation()})}):null]}):null},N=t=>{let{setClickedSphericalCoords:e,clickedSphericalCoords:l}=t,a=(0,o.useRef)(),{camera:s,gl:n}=(0,c.A)(),[r,d]=(0,o.useState)(null),g=(0,o.useMemo)(()=>{let t=new u.TextureLoader().load("/GAME-Find-Out-Where-On-Earth/_next/static/media/earth_tex1.9af651b1.jpg");return t.wrapS=u.RepeatWrapping,t.offset.x=.2475,t},[]),h=(0,o.useMemo)(()=>new u.MeshStandardMaterial({map:g}),[g]),m=t=>{let l=n.domElement.getBoundingClientRect(),i=(t.clientX-l.left)/l.width*2-1,o=-((t.clientY-l.top)/l.height*2)+1,r=new u.Raycaster;r.setFromCamera({x:i,y:o},s);let c=r.intersectObject(a.current);if(c.length>0){let t=c[0];e(new u.Spherical().setFromVector3(t.point)),d(t.point)}};return(0,i.jsxs)("mesh",{ref:a,scale:[1,1,1],onDoubleClick:j.tq?null:m,onClick:j.tq?m:null,children:[(0,i.jsx)("sphereGeometry",{args:[1,32,32]}),(0,i.jsx)("primitive",{object:h,attach:"material"}),r&&l?(0,i.jsxs)("mesh",{position:r,children:[(0,i.jsx)("sphereGeometry",{args:[.002,16,16]}),(0,i.jsx)("meshBasicMaterial",{color:"red"})]}):null]})},w=t=>{let{location:e,distance:l,points:a,onClose:s}=t,[n,r]=(0,o.useState)(!0);return(0,i.jsx)("div",{className:"modal ".concat(n?"is-active":""),style:{position:"fixed",zIndex:9999},children:(0,i.jsx)("div",{className:"modal-background fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,i.jsx)("div",{className:"modal-content bg-white rounded-lg shadow-xl w-3/4 md:w-1/2 lg:w-1/3",children:(0,i.jsxs)("div",{className:"box p-6 relative",children:[(0,i.jsx)("button",{className:"absolute top-2 right-2 text-3xl",onClick:()=>{r(!1),s()},children:(0,i.jsx)(_.FMH,{fill:"black"})}),(0,i.jsxs)("p",{className:"text-lg text-gray-950 font-semibold mb-2",children:["The place was - ",e]}),(0,i.jsxs)("p",{className:"text-lg text-gray-950 font-semibold",children:["Your guess is ",l," km away"]}),(0,i.jsxs)("p",{className:"text-lg text-green-600 font-semibold",children:["+",a," points"]})]})})})})},k=t=>{let{gpsImageData:e,distances:l,totalScore:a,onClose:s}=t,[n,r]=(0,o.useState)(!0);return(0,i.jsx)("div",{className:"modal ".concat(n?"is-active":""),style:{position:"fixed",zIndex:9999},children:(0,i.jsx)("div",{className:"modal-background fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"modal-content bg-white rounded-lg shadow-xl w-3/4 md:w-1/2 lg:w-1/3 p-6",children:[(0,i.jsx)("button",{className:"absolute top-2 right-2 text-3xl",onClick:()=>{r(!1),s()},children:(0,i.jsx)(_.FMH,{fill:"black"})}),(0,i.jsx)("h1",{className:"text-2xl text-gray-950 font-semibold mb-4",children:"Game Over"}),(0,i.jsxs)("p",{className:"text-lg sm:text-base text-gray-950 font-semibold mb-2",children:["Total Score: ",a]}),(0,i.jsxs)("div",{className:"mt-4 mb-6",children:[(0,i.jsx)("h2",{className:"text-lg sm:text-base text-gray-950 font-semibold mb-2",children:"Distances:"}),(0,i.jsx)("ul",{children:Object.keys(e).map((t,a)=>(0,i.jsxs)("li",{className:"text-gray-600 text-sm sm:text-base",children:["Location: ",e[t].location,", Distance: ",l[a].toFixed(0)," km"]},a))})]}),(0,i.jsx)("button",{onClick:()=>{window.location.reload()},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Try Again"})]})})})};var v=()=>{let[t,e]=(0,o.useState)(0),[l,a]=(0,o.useState)(null),[s,n]=(0,o.useState)(!1),[r,c]=(0,o.useState)({location:"",distance:""}),[m,x]=(0,o.useState)(0),[b,p]=(0,o.useState)([]),[_,j]=(0,o.useState)(0),[v,M]=(0,o.useState)(!1),C=(t,e)=>{if(e){let l={latitude:(t.latitude_tl+t.latitude_br)/2,longitude:(t.longitude_tl+t.longitude_br)/2},i=h(e,new u.Spherical(1,(90-l.latitude)*u.MathUtils.DEG2RAD,l.longitude*u.MathUtils.DEG2RAD));p([...b,i]);let a=i.toFixed(0),s=Math.max(0,1e3*Math.exp(-(3*a)/5e3));x(s=Math.round(s)),j(t=>t+s),c({location:t.location,distance:a}),n(!0)}};return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-full w-full overflow-hidden",style:{backgroundImage:"url('bbg.png')",backgroundSize:"cover",backgroundPosition:"center"},children:[(0,i.jsx)("div",{className:"flex flex-col items-center justify-center space-y-4",children:t<Object.keys(g.c).length?(0,i.jsx)(y,{location:Object.keys(g.c)[t],onGuessButtonClick:()=>{e(t+1),C(g.c[Object.keys(g.c)[t]],l),a(null),t+1===Object.keys(g.c).length&&M(!0)},clickedSphericalCoords:l}):null}),(0,i.jsxs)("div",{className:"fixed top-14 left-2 px-1 py-2 rounded-md text-xl z-50",children:[(0,i.jsxs)("p",{className:"hidden sm:block",children:["Current Score: ",_]}),(0,i.jsx)("p",{className:"sm:hidden",children:_})]}),s?(0,i.jsx)(w,{location:r.location,distance:r.distance,points:m,onClose:()=>n(!1)}):null,v?(0,i.jsx)(k,{gpsImageData:g.c,distances:b,totalScore:_,onClose:()=>M(!1)}):null,(0,i.jsx)("div",{className:"mt-8",children:(0,i.jsxs)(d.Xz,{style:{width:"100vw",height:"100vh"},children:[(0,i.jsx)(f,{}),(0,i.jsx)("ambientLight",{intensity:2}),(0,i.jsx)("directionalLight",{intensity:1,position:[2,1,1]}),(0,i.jsx)(N,{setClickedSphericalCoords:a,clickedSphericalCoords:l})]})})]})},M=()=>(0,i.jsxs)("main",{className:"jsx-259a652caf435fd5",children:[(0,i.jsx)(s(),{id:"259a652caf435fd5",children:"body{overflow:hidden}"}),(0,i.jsx)(n.Z,{}),(0,i.jsx)(v,{})]})}},function(t){t.O(0,[452,689,278,572,971,69,744],function(){return t(t.s=7121)}),_N_E=t.O()}]);